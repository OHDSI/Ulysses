<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creating a study using Ulysses • Ulysses</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Creating a study using Ulysses">
<meta property="og:description" content="Ulysses">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Ulysses</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/atlas.html">Connecting Ulysses to ATLAS</a>
    </li>
    <li>
      <a href="../articles/credentials.html">Setting credentials</a>
    </li>
    <li>
      <a href="../articles/start_study.html">Creating a study using Ulysses</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://ohdsi.github.io/Hades" class="external-link"><img src='https://ohdsi.github.io/Hades/images/hadesMini.png' width=80 height=17 style='vertical-align: top;'></a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Creating a study using Ulysses</h1>
            
      
      
      <div class="hidden name"><code>start_study.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">Ulysses</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Running an OHDSI study contains lots of organizational complexity in
terms of organizing code and proper documentation to communicate the
code. While examples for constructing OHDSI studies have been presented,
for example the SOS challenge, there is no clear workflow towards
developing an OHDSI study as a piece of software available in a github
repository. The OHDSI community would benefit from a workflow tool that
will help standardize the development of network studies and improve its
organization. This gap led to the development of a new R package called
<code>Ulysses</code> (Useful Learning Yielded Structuring and Setting
Epidemiology Studies) dedicated towards assisting in the development of
an OHDSI study.</p>
<p>Ulysses draws inspiration from the R package <a href="https://usethis.r-lib.org/" class="external-link"><code>usethis</code></a>, which is a
workflow tool used for the development of R packages. Similar to OHDSI
studies, there are several administrative steps and procedures required
to develop a stable and transparent R package. <code>usethis</code>
helps R programmers navigate R package development by supplying
functions that automate simple tasks or other useful steps needed to
meet this goal. Ulysses can provide a similar solution for OHDSI
studies, improving the organization, communication and development of
OHDSI studies by supplying simple functions to guide developers towards
a study that is transparent, robust and reproducible. The OHDSI
community would benefit from a tool that enforces standards and
organization in OHDSI studies because it makes it easier for study nodes
to execute network studies from a recognizable structure and provide
guidance to new researchers seeking to build an OHDSI study if they
follow a common workflow. In this software demo, we will showcase an
example of how Ulysses can be used to start a new OHDSI study and help
initiate necessary tasks for organizing and communicating the study to
the OHDSI data network.</p>
<p>In this vignette we walk-through how to build an OHDSI study using
the <code>Ulysses</code> package. We review:</p>
<ul>
<li>Initializing a study in R</li>
<li>Adding repo documentation</li>
<li>Handling database credentials</li>
<li>Adding R scripts</li>
<li>Providing documentation about the study</li>
</ul>
</div>
<div class="section level2">
<h2 id="initializing-an-ohdsi-study-in-r">Initializing an OHDSI study in R<a class="anchor" aria-label="anchor" href="#initializing-an-ohdsi-study-in-r"></a>
</h2>
<p>Once you have downloaded the <code>Ulysses</code> package, you can
begin creating an OHDSI study. To do this, you can run code as shown in
the block below:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/newOhdsiStudy.html">newOhdsiStudy</a></span><span class="op">(</span></span>
<span>  path <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"my_ohdsi_study"</span><span class="op">)</span>,</span>
<span>  studyInfo <span class="op">=</span> <span class="fu"><a href="../reference/setStudyInfo.html">setStudyInfo</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/basename.html" class="external-link">basename</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"my_ohdsi_study"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                           title <span class="op">=</span> <span class="st">"My OHDSI Study"</span><span class="op">)</span>,</span>
<span>  authors <span class="op">=</span> <span class="fu"><a href="../reference/setStudyAuthors.html">setStudyAuthors</a></span><span class="op">(</span></span>
<span>    developer <span class="op">=</span> <span class="st">"John Smith"</span>,</span>
<span>    developerEmail <span class="op">=</span> <span class="st">"john.smith@ohdsi.org"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  about <span class="op">=</span> <span class="fu"><a href="../reference/setStudyDescription.html">setStudyDescription</a></span><span class="op">(</span></span>
<span>    desc <span class="op">=</span> <span class="st">"This is an OHDSI study for characterizing a population. This is an example."</span>,</span>
<span>    ta <span class="op">=</span> <span class="st">"Cardiovascular"</span>,</span>
<span>    dataSources <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"Synthea"</span>, <span class="st">"Synpuf"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  tags <span class="op">=</span> <span class="fu"><a href="../reference/setStudyTags.html">setStudyTags</a></span><span class="op">(</span><span class="st">"OHDSI"</span>, <span class="st">"OMOP"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>This function will print some information to your console about
start-up tasks and open an R project in a new session, for details on
Rstudio projects see <a href="https://r-pkgs.org/workflow101.html#sec-workflow101-rstudio-projects" class="external-link">link</a>.</p>
<p>The additional inputs of the <code>newOhdsiStudy</code> function
build meta data for the study repository that will be stored in a
<code>_study.yml</code> file. This meta data serves two purposes: 1)
provides human-readable information about the study and 2) serves as a
source of information to populate fields for templated files generated
using <code>Ulysses</code>. For example, if we were to generate a
<code>README</code> file using <code>Ulysses</code> it would be built
using this meta information.</p>
</div>
<div class="section level2">
<h2 id="ulysses-directory-structure">Ulysses Directory structure<a class="anchor" aria-label="anchor" href="#ulysses-directory-structure"></a>
</h2>
<p>In a new R session, users will notice a pre-populated directory
structure in their project folder. This directory structure contains
specific folders and files that are important for a study to be
self-contained within the new R project.</p>
<div class="float">
<img src="images/ulysses_directory.png" alt="Ulysses Directory Structure"><div class="figcaption">Ulysses Directory Structure</div>
</div>
<p><code>Ulysses</code> builds the following folders:</p>
<div class="section level4">
<h4 id="analysis">
<code>analysis</code><a class="anchor" aria-label="anchor" href="#analysis"></a>
</h4>
<p>The analysis folder contains files that correspond to study analysis.
There are three main folders created.</p>
<ul>
<li>
<code>src</code> - contains the underlying functions that execute
the analysis. These files can be R scripts, sql files or python scripts,
for example. With <code>Ulysses</code>, users can generate templated
internal R files using the command <code>makeInternals</code>.</li>
<li>
<code>tasks</code> - hold the executing scripts that generate the
results of the study. With <code>Ulysses</code>, we think of studies as
a series of tasks implemented in a specific order, like a pipeline. The
<code>tasks</code> folder organizes these individual tasks. With
<code>Ulysses</code>, users can generate templated internal R files
using the command <code>makeAnalysisScript</code>.</li>
<li>
<code>migrations</code> - contain post-processing scripts to move
and prepare data from a series of results to a format that is
“presentation ready”. When conducting studies in OMOP, it is common to
run the same analysis on different databases. Migration scripts help
bind the results of all databases run in the study and format tables to
present in a quarto report or shiny app. With <code>Ulysses</code>,
users can generate templated internal R files using the command
<code>makeMigrationScript</code>.</li>
</ul>
</div>
<div class="section level4">
<h4 id="cohorts">
<code>cohorts</code><a class="anchor" aria-label="anchor" href="#cohorts"></a>
</h4>
<p>The cohorts folder is meant to organize files that are used to
generate cohort definitions in the database. In an OHDSI study, cohort
definitions are specified in a <code>json</code> file format following
the specifications of <a href="https://github.com/OHDSI/circe-be" class="external-link"><code>circe-be</code></a>. We
suggest placing cohorts used in the analysis in the cohort folder in
order for the study to be self-contained, meaning it does not rely on
ATLAS to execute. However, we <strong>highly</strong> recommend that
users maintain the organization of their cohorts in ATLAS as a source of
truth for both cohort definition and generation. The <code>sql</code>
folder is created to store sql files used to build cohort definitions.
This is a good location for cohort definitions that do not follow the
<code>circe-be</code> structure.</p>
<p>Keeping track of cohorts can be a bit tricky. <code>Ulysses</code>
provides a helper function to track json files in the cohorts folder
called <code>cohortManifest</code>. This function will list the name of
the json file and its corresponding id. By default, the cohort Id
assigned to the cohort json is in alphabetical order starting with 1.
<code>Ulysses</code> also creates a file called the
<code>CohortDetails.qmd</code> which prints the human-readable rendering
of the json expression using <a href="https://github.com/OHDSI/CirceR" class="external-link"><code>CirceR</code></a>.
<strong>These functions are still in development as of
v0.0.4</strong>.</p>
</div>
<div class="section level4">
<h4 id="documentation">
<code>documentation</code><a class="anchor" aria-label="anchor" href="#documentation"></a>
</h4>
<p>Study repositories should not only contain code, they should also
contain documentation about the design of the study and how to run the
study. Study repo’s should be self-contained, meaning we can go to one
location to get all code and human-readable documentation about the
study. <code>Ulysses</code> builds this into its repository structure
with a <code>hub</code> folder and a <code>misc</code> folder. The
<code>hub</code> folder contains files that are specific to the study
hub, an html website that provides all information about the study. The
<code>misc</code> folder is a place-holder to store word documents,
excel files, slide decks or other important documentation needed for the
study.</p>
<div class="section level5">
<h5 id="study-hub">Study Hub<a class="anchor" aria-label="anchor" href="#study-hub"></a>
</h5>
<p>The study hub is a website that a user can generate through
<code>Ulysses</code> that provides information about the design of a
study and its results. The study hub is generated using
<code>quarto</code>. The study hub can be generated using the function
<code>buildStudyHub</code>. The study hub relies on the generation and
maintenance of 4 files: README.md, NEWS.md, AnalysisPlan.qmd and
ResultsReport.qmd.</p>
<div class="float">
<img src="images/ulysses_study_hub.png" alt="Ulysses Study Hub"><div class="figcaption">Ulysses Study Hub</div>
</div>
</div>
<div class="section level5">
<h5 id="suggested-files">Suggested Files<a class="anchor" aria-label="anchor" href="#suggested-files"></a>
</h5>
<p><code>Ulysses</code> has functions to initialize some suggested files
for a study:</p>
<ul>
<li>
<code>AnalysisPlan.qmd</code>: the statistical analysis plan for the
study, which specifies the study design and analytical methods. This
file can be templated in <code>Ulysses</code> using the command
<code>makeAnalysisPlan</code>.</li>
<li>
<code>ResultsReport.qmd</code>: the report summarizing results from
the study following its execution. This file can be templated in
<code>Ulysses</code> using the command
<code>makeResultsReport</code>.</li>
<li>
<code>ContributionGuidelines.qmd</code>: if the study is a network
studies, maintainers should provide resources on how others can
contribute to the study. Topics ranges from how to file issues, how to
send results to the study host, and how to collaborate in a positive
environment. This file can be templated in <code>Ulysses</code> using
the command <code>makeContributionGuidelines</code>.</li>
<li>
<code>HowToRun.qmd</code>: a document that explains how to execute
the study code to study nodes or interested parties. Should describe
technical requirements needed prior to running the study, local setup,
and execution. This file can be templated in <code>Ulysses</code> using
the command <code>makeHowToRun</code>.</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="exec">
<code>exec</code><a class="anchor" aria-label="anchor" href="#exec"></a>
</h3>
<p>The <code>exec</code> folder is a location to store output files that
result from the study execution. This includes results and logs from the
study run and a folder to store post-processed data called
<code>export</code>. The <code>exec</code> folder is always ignored in
git.</p>
</div>
<div class="section level3">
<h3 id="extras">
<code>extras</code><a class="anchor" aria-label="anchor" href="#extras"></a>
</h3>
<p>Sometimes studies have files that don’t have a natural location from
those specified above. The <code>extras</code> folder is a location to
store any additional files needed to run or support the execution of the
study. This is also a good location to store internal setup scripts, but
remember to ignore them in git.</p>
</div>
</div>
<div class="section level2">
<h2 id="additional-repository-files">Additional Repository Files<a class="anchor" aria-label="anchor" href="#additional-repository-files"></a>
</h2>
<p>In addition to the pre-generated folders in the new study repository,
<code>Ulysses</code> also helps generate additional files that should be
in the repository. Some of these key files are described below.</p>
<div class="section level4">
<h4 id="study-yml">
<code>_study.yml</code><a class="anchor" aria-label="anchor" href="#study-yml"></a>
</h4>
<p>A file unique to directories initialized using <code>Ulysses</code>
is a metadata file called <code>_study.yml</code>. Using the inputs
specified in the <code>newOhdsiStudy</code> function, a metadata file is
populated. As mentioned this file store information about the study
directory and also uses it as inputs to templated files generated in
<code>Ulysses</code>. It is important to maintain this file during the
development of a study, whether that is to update default fields in the
yaml file or add information. Below is a snapshot of a
<code>_study.yml</code> file with the essential metadata fields.</p>
<div class="float">
<img src="images/ulysses_meta.png" alt="Ulysses MetaData"><div class="figcaption">Ulysses MetaData</div>
</div>
<div class="section level5">
<h5 id="fields">Fields<a class="anchor" aria-label="anchor" href="#fields"></a>
</h5>
<p>Below we describe the key fields in this file.</p>
<ul>
<li>id: an identifier for the study which is the same as the directory
name. Use either a study id or acronym</li>
<li>title: a full title for the study, more thorough than the id. If no
title is provided, the input defaults to the id.</li>
<li>type: a keyword describing the type of study being conducted. Could
be a <strong>Characterization</strong>, <strong>Population-Level
Estimation</strong>, <strong>Patient-Level Prediction</strong>, or
<strong>Database Assessment</strong>, for example.</li>
<li>version: a value that represents the version of the study. Suggest
using semantic versioning logic.</li>
<li>authors: stores the name and email of the developer (person
in-charge of code development) and the lead (person in-charge of the
study). You may add other authors who are designated as
<em>members</em>
</li>
<li>timeline: a list of information relating to the development timeline
of the study. This includes the study start and end dates. The study
status is also listed here, where acceptable values are
<strong>Started</strong>, <strong>In-Progress</strong>,
<strong>Stopped</strong> and <strong>Completed</strong>.</li>
<li>about: a short description about the study, the therapeutic area it
covers and data sources used.</li>
<li>links: a listing of hyperlinks to guide people to key documentation
such as the analysis plan, report, dashboard and other resources.</li>
<li>tags: a list of keyword identifiers for the project</li>
</ul>
</div>
<div class="section level5">
<h5 id="maintenance">Maintenance<a class="anchor" aria-label="anchor" href="#maintenance"></a>
</h5>
<p><code>Ulysses</code> provides functions to maintain the
<code>_study.yml</code> file.</p>
<ul>
<li>Add Fields
<ul>
<li><code><a href="../reference/addStudyMember.html">addStudyMember()</a></code></li>
<li><code><a href="../reference/addTags.html">addTags()</a></code></li>
<li><code><a href="../reference/addDataSources.html">addDataSources()</a></code></li>
<li><code><a href="../reference/addLinks.html">addLinks()</a></code></li>
</ul>
</li>
<li>Update Fields
<ul>
<li><code><a href="../reference/updateStudyEndDate.html">updateStudyEndDate()</a></code></li>
<li><code>updateSutdyStatus()</code></li>
<li><code><a href="../reference/updateStudyTitle.html">updateStudyTitle()</a></code></li>
<li><code>updatStudyVersion()</code></li>
<li><code><a href="../reference/updateStudyDescription.html">updateStudyDescription()</a></code></li>
<li><code><a href="../reference/updateTherapeuticArea.html">updateTherapeuticArea()</a></code></li>
<li><code><a href="../reference/updateDeveloperInfo.html">updateDeveloperInfo()</a></code></li>
<li><code><a href="../reference/updateLeadInfo.html">updateLeadInfo()</a></code></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section level4">
<h4 id="readme-md">
<code>README.md</code><a class="anchor" aria-label="anchor" href="#readme-md"></a>
</h4>
<p>For those unfamiliar with code development, the
<strong>README</strong> file is a standard file used to introduce the
contents of a repository, like a cover-page. It is the first file users
see when they navigate to the repository page in your repository hosting
service (i.e. BitBucket or Github). Therefore a strong README file is
essential for a study. <code>Ulysses</code> provides the function
<code><a href="../reference/makeReadMe.html">makeReadMe()</a></code> which initializes the README using inputs from
the metadata stored in the <code>_study.yml</code>.</p>
<p>Another feature offered by <code>Ulysses</code> is support for svg
badges. These simple badges appear at the top of the README and provide
useful information about the study. Badges seen in OHDSI studies include
a study status badge and badges versioning the CDM and OMOP vocabulary.
<code>Ulysses</code> will provide more support and documentation for
badges in the future.</p>
</div>
<div class="section level4">
<h4 id="news-md">
<code>NEWS.md</code><a class="anchor" aria-label="anchor" href="#news-md"></a>
</h4>
<p>Another common file in software repositories is the NEWS file. The
purpose of the NEWS file is to track changes to the software over time.
Of course, version control software such as github keeps a record of the
iterations of the study as it is developed, however it is helpful to
have a “plain english” file that explains what has happened as the study
has developed over time. NEWS files are often maintained via a <a href="https://semver.org/" class="external-link">semantic versioning</a> system. OHDSI studies
are not entirely software, however it is important to maintain order
over the development of the technical pieces of the study.
<code>Ulysses</code> offers a simple function that initiates this file,
<code><a href="../reference/makeNews.html">makeNews()</a></code>.</p>
</div>
<div class="section level4">
<h4 id="config-yml">
<code>config.yml</code><a class="anchor" aria-label="anchor" href="#config-yml"></a>
</h4>
<p>An important aspect of running an OHDSI study is handling credentials
to connect to the Database Management System (DBMS) that hosts the OMOP
data. Security of these credentials is very important.
<code>Ulysses</code> offers support on handling these credentials
through the <code>config.yml</code> file. Credentials needed to run a
study are as follows:</p>
<ul>
<li>
<strong>dbms</strong>: the name of the dbms used to host the OMOP
data</li>
<li>
<strong>user</strong>: your user name needed to access the data in
the dbms</li>
<li>
<strong>password</strong>: your password needed to access the data
in the dbms</li>
<li>
<strong>connectionString</strong>: this string sets the connection
to the database. It will typically look something like:
<code>jdbc:&lt;dbms&gt;://&lt;server url&gt;:&lt;dbms port&gt;/&lt;database&gt;</code>.
This string will vary from site to site. Contact your system
administrator to get the information you need for this credential</li>
<li>
<strong>cdmDatabaseSchema</strong>: a name that defines where the
cdm tables sit for a particular database in the dbms.
<code>Database</code> defines the name of the database where the omop
data sits and the <code>Schema</code> defines where the cdm is within
that database. In databases like sql server or snowflake this variable
is often separated by a “.” i.e. `<database>.<schema></schema></database>
</li>
<li>
<strong>vocabDatabaseSchema</strong>: a name that defines where the
vocabulary tables sit for a particular database in the dbms. The
vocabDatabaseSchema is typically the same as the cdmDatabaseSchema,
although same sites split the vocabulary into a different area.</li>
<li>
<strong>workDatabaseSchema</strong>: a name that defines where the
work tables sit for a particular database in the dbms. The work section
(referred to synonymously with scratch or write) is an area where the
user is given read and write access in the database. The
cdmDatabaseSchema is typically only a read-only schema, so users do not
corrupt information. The workDatabaseSchema is a dedicated area where
researchers can build cohort tables or other intermediary tables needed
for studies. Contact your database administrator to ensure you have a
dedicated workDatabaseSchema. Note this should be separate from the
database schema dedicated to ATLAS.</li>
</ul>
<p>Often times sites require additional credentials such as database
roles or other parameters used to define tempEmulationSchemas, for
example. You can add these parameters manually in the
<code>Ulysses</code> workflow, shown later. Be sure to contact your
database administrator to have all these credentials handy before
running a study.</p>
<p>Now that you have collected your credentials we need to store them
somewhere secure to be accessed continuely within the study.
<code>Ulysses</code> does this using a <em>config.yml</em> file. <a href="https://yaml.org/" class="external-link">Yaml</a> is a simple, readable
data-serialization language used to provide settings or configurations
for applications. For those familiar with R, the <em>config.yml</em>
file works similarly to an <code>.Renviron</code> file. But wait, there
is more to the <em>config.yml</em> file! The credentials are further
protected via <a href="https://github.com/r-lib/keyring" class="external-link"><code>keyring</code></a> API.
<code>keyring</code> stores your credentials behind a password. We use
<code>keyring</code> and <code>config</code> together to ensure that
users do not accidentally expose passwords when working on a study.
<code>Ulysses</code> provides a function that initializes the
<em>config.yml</em> file:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">Ulysses</span><span class="fu">::</span><span class="fu"><a href="../reference/initConfig.html">initConfig</a></span><span class="op">(</span>block <span class="op">=</span> <span class="st">"example"</span>, database <span class="op">=</span> <span class="st">"synpuf_110k"</span>, withKeyring <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>When a user creates a new <code>config.yml</code> file it is added to
<code>.gitignore</code> to ensure it is not committed to a github
repository. The config file shows each credential connected to the block
name.</p>
<pre><code># Config File for my_ohdsi_study

default:
  projectName: my_ohdsi_study

# Config block for example

example:
  databaseName: synpuf_110k
  cohortTable: my_ohdsi_study_example
  dbms: !expr keyring::key_get('example_dbms', keyring = 'my_ohdsi_study')
  user: !expr keyring::key_get('example_user', keyring = 'my_ohdsi_study')
  password: !expr keyring::key_get('example_password', keyring = 'my_ohdsi_study')
  connectionString: !expr keyring::key_get('example_connectionString', keyring = 'my_ohdsi_study')
  cdmDatabaseSchema: !expr keyring::key_get('example_cdmDatabaseSchema', keyring = 'my_ohdsi_study')
  vocabDatabaseSchema: !expr keyring::key_get('example_vocabDatabaseSchema', keyring = 'my_ohdsi_study')
  workDatabaseSchema: !expr keyring::key_get('example_workDatabaseSchema', keyring = 'my_ohdsi_study')</code></pre>
<p>If we wanted to add another credential in this block we can add new
line beneath <code>workDatabaseSchema</code>. Be sure to keep the
indentation and add an extra space after. To set up the keyrings,
<code>Ulysses</code> also supplies a helper script to set this up.
Follow the script to set up the keyring credentials so that the
<em>config.yml</em> can be properly used.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">Ulysses</span><span class="fu">::</span><span class="fu"><a href="../reference/makeKeyringSetup.html">makeKeyringSetup</a></span><span class="op">(</span>configBlock <span class="op">=</span> <span class="st">"example"</span>, database <span class="op">=</span> <span class="st">"synpuf_110k"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Martin Lavallee.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
